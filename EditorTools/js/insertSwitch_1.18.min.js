function onDefaultValueLoad(a, b) { if (ArgList != null && ArgList[0].length > 0) { if (a._toggleStatesData[0].text.toLowerCase() == ArgList[2]) a.set_selectedToggleStateIndex(0); else a.set_selectedToggleStateIndex(1); ArgList = null } } function changeAction(a, b) { var c = null; switch (a.get_value()) { case "if_then_next_page": case "previous_page": case "next_page": case "post": case "call": case "share": case "email": case "sms": case "take_photo": case "capture_signature": case "login_to_mcommerce": case "init_card_swiper": case "manual_card_charge": case "void_charge": case "capture_process_document": case "manage_document_case": c = a.get_value() + "_view"; break; default: c = "no_view"; break } var d = document.getElementById("actionsMultiPage"); for (var e = 0; e < d.control._pageViewData.length; e++) { if (d.control._pageViewData[e].id == c) { d.control._selectPageViewByIndex(e); $(".param").each(function (a, b) { $(this).remove() }); return } } d.control._selectPageViewByIndex(0); $(".param").each(function (a, b) { $(this).remove() }) } function setComboValue(a, b) { if (a.control) { a.control.trackChanges(); var c = a.control.findItemByValue(b); if (c) { c.select() } a.control.commitChanges() } else { a.trackChanges(); var c = a.findItemByValue(b); if (c) { c.select() } a.commitChanges() } } function OnClientGoToPagesLoadHandler(a) { gotoPageCombo = a } function OnClientpage_if_trueLoadHandler(a) { page_if_true = a } function OnClientpage_if_falseLoadHandler(a) { page_if_false = a } function GoToPages_SelectedIndexChanged(a, b) { next_page_value = a.get_text() } function next_page_condition_Changed(a, b) { next_page_condition_value = a.value } function page_if_true_SelectedIndexChanged(a, b) { page_if_true_value = a.get_text() } function page_if_false_SelectedIndexChanged(a, b) { page_if_false_value = a.get_text() } function contains(a, b) { return a.indexOf(b) >= 0 ? true : false } function addPropertySelected(a, b) { addProperty(b, a.value); a.selectedIndex = 0 } function addPropertySelected(a, b) { addProperty(b, a.value); a.selectedIndex = 0 } function addProperty(a, b) { if (b == undefined) return; var c = b.replaceAll(" ", "_").toLowerCase(); var d = document.getElementById(c); if (d != null) return; var e = c + "_delete"; var f = c + "_div"; $("#" + a).css("display", "none"); $("#" + a).before('<div id="' + f + '"><table style="width: 410px"><tr><td align="left" valign="top" style="width:180px" >' + b + '</td><td valign="top"><input class="param" type="text" id="' + c + '" size="30" /></td><td style="width:20px"><img id="' + e + '" alt="delete" src="../images/delete_small.gif"  /></td></tr></table></div>'); $("#" + c).focus(); $("#" + c).change(function (b) { b.cancelBubble = true; if (b.stopPropagation) b.stopPropagation(); $("#" + a).css("display", "block") }); $("#" + e).click(function (b) { var c = b.target.attributes[2].value; var d = c.substring(0, c.length - 7) + "_div"; $("#" + d).remove(); $("#" + a).css("display", "block") }) } function initDialog() { var a = document.getElementById("actionsMultiPage"); var b = document.getElementById("actions").control; ArgList = parent.window.getDialogInputArgs(); for (var c = 0; c < ArgList.length; c++) { if (ArgList[c] == null) ArgList[c] = "" } if (ArgList[0].length > 0) { var d = document.getElementById("insertButtonID"); d.value = "Update Switch"; var e = document.getElementById("switchName"); e.value = ArgList[0]; var f = document.getElementById("SwitchType"); var g = f.control.findItemByValue(ArgList[1]); g.select(); var a = document.getElementById("actionsMultiPage"); var b = document.getElementById("actions"); var h = document.getElementById("AccountType"); var i = document.getElementsByName("view_response"); var j = ArgList[3].split(";"); for (var c = 0; c < j.length; c++) { var k = j[c].split(":"); switch (k[0]) { case "post": setComboValue(b, "post"); break; case "next_page": gotoPage_do_select = true; var l = k[1].split("~"); gotoPage_selected_item = l[1]; setComboValue(b, "next_page"); gotoPageCombo = document.getElementById("GoToPages").control; if (gotoPageCombo.get_text() != gotoPage_selected_item) { gotoPageCombo.trackChanges(); gotoPageCombo.set_text(gotoPage_selected_item); gotoPageCombo.commitChanges() } break; case "if_then_next_page": gotoPage_do_select = true; setComboValue(b, "if_then_next_page"); var m = k[1].split(","); var n = m[0].split("~"); var o = document.getElementById("next_page_condition"); o.value = n[1].replaceAll("#gt", ">").replaceAll("#lt", "<").replaceAll("#eq", "="); page_if_true.trackChanges(); n = m[1].split("~"); page_if_true.set_text(n[1]); page_if_true.commitChanges(); page_if_false.trackChanges(); n = m[2].split("~"); page_if_false.set_text(n[1]); page_if_false.commitChanges(); break; case "previous_page": setComboValue(b, "previous_page"); break; case "call": var p = document.getElementById("phone_field"); var q = k[1].split("~"); p.value = q[1]; setComboValue(b, "call"); break; case "share": setComboValue(b, "share"); var r = k[1].split(","); for (var s = 0; s < r.length; s++) { var t = r[s].split("~"); switch (t[0]) { case "subject_field": var u = document.getElementById("share_subject_field"); u.value = t[1]; break; case "message_field": var v = document.getElementById("message_field"); v.value = t[1]; break; case "media_link_field": var w = document.getElementById("media_link_field"); w.value = t[1]; break; case "facebook_account_field": var x = document.getElementById("facebook_account_field"); x.value = t[1]; break; case "twitter_account_field": var y = document.getElementById("twitter_account_field"); y.value = t[1]; break; case "foursquare_account_field": var z = document.getElementById("foursquare_account_field"); z.value = t[1]; break; case "sms_phone_field": var A = document.getElementById("sms_phone_field"); A.value = t[1]; break; case "to_email_field": var B = document.getElementById("to_email_field"); B.value = t[1]; break } } break; case "email": var r = k[1].split(","); for (var s = 0; s < r.length; s++) { var t = r[s].split("~"); switch (t[0]) { case "message_field": var v = document.getElementById("message_field2"); v.value = t[1]; break; case "media_link_field": var w = document.getElementById("media_link_field2"); w.value = t[1]; break; case "to_email_field": var B = document.getElementById("to_email_field2"); B.value = t[1]; break; case "subject_field": var C = document.getElementById("subject_field"); C.value = t[1]; break } } setComboValue(b, "email"); break; case "sms": var r = k[1].split(","); for (var s = 0; s < r.length; s++) { var t = r[s].split("~"); switch (t[0]) { case "message_field": var v = document.getElementById("message_field3"); v.value = t[1]; break; case "media_link_field": var w = document.getElementById("media_link_field3"); w.value = t[1]; break; case "sms_phone_field": var A = document.getElementById("sms_phone_field2"); A.value = t[1]; break } } setComboValue(b, "sms"); break; case "take_photo": setComboValue(b, "take_photo"); var D = document.getElementById("image_field"); var E = document.getElementById("compression"); var F = document.getElementById("icon_field"); var G = document.getElementById("icon_width"); var H = document.getElementById("icon_height"); var I = k[1].split(","); if (I.length > 0) { for (var s = 0; s < I.length; s++) { var J = I[s].split("~"); switch (J[0]) { case "image_field": D.value = J[1]; break; case "compression": E.value = J[1]; break; case "icon_field": F.value = J[1]; break; case "icon_width": G.value = J[1]; break; case "icon_height": H.value = J[1]; break } } } else { F.value = ""; G.value = "60"; H.value = "80" } break; case "capture_doc": setComboValue(b, "capture_doc"); var K = document.getElementById("doc_case_field"); var r = k[1].split(","); for (var s = 0; s < r.length; s++) { var t = r[s].split("~"); if (t.length >= 2) { switch (t[0]) { case "doc_case_field": var K = document.getElementById("doc_case_field"); K.value = t[1]; break } } } break; case "mobile_commerce": setComboValue(b, "mobile_commerce"); var r = k[1].split(","); for (var s = 0; s < r.length; s++) { var t = r[s].split("~"); switch (t[0]) { case "mobile_commerce_username": var L = document.getElementById("mobile_commerce_username"); L.value = t[1]; break; case "mobile_commerce_password": var M = document.getElementById("mobile_commerce_password"); M.value = t[1]; break; default: var N = t[0].substring(0, 1).toUpperCase() + t[0].substring(1).replaceAll("_", " "); addProperty(N); $("#" + t[0]).attr("value", t[1]); break } } $("#addPropertyDiv").css("display", "block"); break; case "compute": var O = document.getElementById("compute"); O.value = k[1].replaceAll("~", "=").replaceAll("|", ";"); var P = document.getElementById("docompute"); P.checked = true; break; default: break } } style = ArgList[4] } } function insertButton() { ArgList = new Array(5); var a = document.getElementById("switchName"); if (a.value == null || a.value == "") { alert("Internal Switch Name must be filled"); return } if (!IsValidObjectName(a.value)) { alert('switch Name can only contain either a letter, number, space or "_" and be 1 to 100 characters long'); return } a.value = a.value.replaceAll(" ", "_"); var b = document.getElementById("phone"); var c = document.getElementById("link"); ArgList[0] = a.value; var d = document.getElementById("SwitchType"); ArgList[1] = d.control.get_value(); var e = document.getElementById("DefaultValue"); ArgList[2] = e.control._toggleStatesData[e.control.get_selectedToggleStateIndex()].text.toLowerCase(); var f = document.getElementById("actionsMultiPage"); var g = f.control.get_selectedPageView(); var h = g.get_id(); if (h == "next_page_view") { next_page_value = document.getElementById("GoToPages").control.get_text(); if (next_page_value == null || next_page_value.length == 0 || contains(next_page_value, "Choose Field or Enter")) { alert("The name of the next page must be set"); return } ArgList[3] = "next_page:page~" + next_page_value.replaceAll(" ", "_") + ";" } else if (h == "if_then_next_page_view") { var i = document.getElementById("next_page_condition"); next_page_condition_value = i.value; var j = document.getElementById("page_if_true"); page_if_true_value = j.control.get_text(); var k = document.getElementById("page_if_false"); page_if_false_value = k.control.get_text(); if (next_page_condition_value == null || next_page_condition_value.length == 0) { alert("The if condition must be set"); return } if (!contains(next_page_condition_value, ">") && !contains(next_page_condition_value, "<") && !contains(next_page_condition_value, "=")) { alert("The if condition must contain a logical operation"); return } if (page_if_true_value.length == 0 || contains(page_if_true_value, "Choose Field or Enter")) { alert("The page for the true condition must be set"); return } if (page_if_false_value.length == 0 || contains(page_if_false_value, "Choose Field or Enter")) { alert("The page for the false condition must be set"); return } ArgList[3] = "if_then_next_page:next_page_condition_value~" + next_page_condition_value.replaceAll("<", "#lt").replaceAll(">", "#gt").replaceAll("=", "#eq") + ",page_if_true_value~" + page_if_true_value.replaceAll(" ", "_") + ",page_if_false_value~" + page_if_false_value.replaceAll(" ", "_") + ";" } else if (h == "previous_page_view") { ArgList[3] = "previous_page;" } else if (h == "post_view") { ArgList[3] = "post:;" } else if (h == "call_view") { var b = document.getElementById("phone_field"); if (b.value.length == 0) { alert("The name of the phone field must be set."); return } if (!IsValidObjectName(b.value)) { alert('Phone field can only contain either a letter, number, space or "_" and be 1 to 100 characters long'); return } ArgList[3] = "call:phone_field~" + b.value.replaceAll(" ", "_") + ";" } else if (h == "share_view") { var l = document.getElementById("share_subject_field"); var m = document.getElementById("message_field"); var n = document.getElementById("media_link_field"); var o = document.getElementById("facebook_account_field"); var p = document.getElementById("twitter_account_field"); var q = document.getElementById("foursquare_account_field"); var r = document.getElementById("sms_phone_field"); var s = document.getElementById("to_email_field"); ArgList[3] = "share:subject_field~" + l.value.replaceAll(" ", "_") + ",message_field~" + m.value.replaceAll(" ", "_") + ",media_link_field~" + n.value.replaceAll(" ", "_") + ",sms_phone_field~" + r.value.replaceAll(" ", "_") + ",to_email_field~" + s.value.replaceAll(" ", "_") + ";" } else if (h == "email_view") { var t = document.getElementById("to_email_field2"); var u = document.getElementById("subject_field"); var v = document.getElementById("message_field2"); var w = document.getElementById("media_link_field2"); ArgList[3] = "email:to_email_field~" + t.value.replaceAll(" ", "_") + ",subject_field~" + u.value.replaceAll(" ", "_") + ",media_link_field~" + w.value.replaceAll(" ", "_") + ",message_field~" + v.value.replaceAll(" ", "_") + ";" } else if (h == "sms_view") { var x = document.getElementById("sms_phone_field2"); var y = document.getElementById("message_field3"); var z = document.getElementById("media_link_field3"); ArgList[3] = "sms:sms_phone_field~" + x.value.replaceAll(" ", "_") + ",media_link_field~" + z.value.replaceAll(" ", "_") + ",message_field~" + y.value.replaceAll(" ", "_") + ";" } else if (h == "take_photo_view") { ArgList[3] = "take_photo:"; var A = document.getElementById("image_field"); if (A.value == null || A.value == "") { alert("Photo image field must be filled"); return } if (!IsValidObjectName(A.value)) { alert('Photo image field can only contain either a letter, number, space or "_" and be 1 to 100 characters long'); return } var B = document.getElementById("compression"); if (B.value == null || B.value == "") { alert("Compression field must be filled"); return } if (!IsNumeric(B.value)) { alert("Compression must be between 0.001 to 1.0"); return } var C = parseFloat(B.value); if (C < 1e-4 || C > 1) { alert("Compression must be between 0.001 to 1.0"); return } ArgList[3] += "image_field~" + A.value.replaceAll(" ", "_") + ",compression~" + B.value; var D = document.getElementById("icon_field"); var E = document.getElementById("icon_width"); var F = document.getElementById("icon_height"); varicon_attributes = ""; if (D.value != "") ArgList[3] += ",icon_field~" + D.value.replaceAll(" ", "_") + ",icon_width~" + E.value + ",icon_height~" + F.value; ArgList[3] += ";" } else if (h == "capture_doc_view") { var G = document.getElementById("doc_case_field"); ArgList[3] = "capture_doc:doc_case_field~" + G.value + ";" } else if (h == "mobile_commerce_view") { var H = document.getElementById("mobile_commerce_username"); if (H.value.length == 0) { alert("The mobile commerce username must be set."); return } var I = document.getElementById("mobile_commerce_password"); if (I.value.length == 0) { alert("The mobile commerce password must be set."); return } ArgList[3] = "mobile_commerce:mobile_commerce_username~" + H.value + ",mobile_commerce_password~" + I.value; error = false; $(".param").each(function (a, b) { if (b.value.length == 0) { alert("All parameters must have values."); error = true; return } ArgList[3] += "," + b.id + "~" + b.value }); if (error) return; ArgList[3] += ";" } else ArgList[3] = ""; var J = document.getElementById("docompute"); if (J.checked) { var K = document.getElementById("compute"); if (K.value == null || K.value == "") { alert("Compute field must be filled"); return } ArgList[3] += "compute:" + K.value.replaceAll("=", "~").replaceAll(";", "|") + ";" } ArgList[4] = style; parent.window.InsertSwitchCallback(ArgList) } function getActionsIndex(a) { var b = document.getElementById("actions"); var c = b.control.get_visibleItems(); for (var d = 0; d < c.length; d++) { if (c[d].get_value() == a) { return d } } return 0 } function IsNumeric(a) { return /^-?(0|[1-9]\d*|(?=\.))(\.\d+)?$/.test(a) } if (window.attachEvent) { window.attachEvent("onload", initDialog) } else if (window.addEventListener) { window.addEventListener("load", initDialog, false) } var ArgList = null; var gotoPageCombo; var page_if_true; var page_if_false; var next_page_value; var next_page_condition_value; var page_if_true_value; var page_if_false_value; $(function () { })