function getDialogInputArgs() { return dialog_input_args } function BringToMostFront() { var a = getSelectedElement(); if (a == null) return; var b = getMaxZIndex(); a.css("z-index", "" + (b + 1)) } function SendToMostBack() { var a = getSelectedElement(); if (a == null) return; var b = getMinZIndex(); a.css("z-index", "" + (b - 1)) } function doEditProperties() { var a = getSelectedHtml(); if (a == null) return; editorSelectedHtml = a; var b = a.indexOf('title="MobiFlex '); b += 16; var c = a.indexOf('"', b); var d = a.substring(b, c); var e; switch (d) { case "HtmlPanel": dialog_input_args = ParseHtmlPanel(a); InsertHtmlPanelOpen(dialog_input_args); return; case "Label": dialog_input_args = ParseLabel(a); InsertLabelOpen(dialog_input_args); return; case "Slider": dialog_input_args = ParseSlider(a); InsertSliderOpen(dialog_input_args); return; case "Switch": dialog_input_args = ParseSwitch(a); InsertSwitchOpen(dialog_input_args); return; case "CheckBox": dialog_input_args = ParseCheckBox(a); InsertCheckBoxOpen(dialog_input_args); return; case "TextField": dialog_input_args = ParseTextField(a); InsertTextFieldOpen(dialog_input_args); return; case "TextArea": dialog_input_args = ParseTextArea(a); InsertTextAreaOpen(dialog_input_args); break; case "Table": dialog_input_args = ParseTable(a); InsertTableOpen(dialog_input_args); return; case "WebView": dialog_input_args = ParseWebView(a); InsertWebViewOpen(dialog_input_args); return; case "Map": dialog_input_args = ParseMap(a); InsertMapOpen(dialog_input_args); return; case "Button": dialog_input_args = ParseButton(a); InsertButtonOpen(dialog_input_args); return; case "ImageButton": dialog_input_args = ParseImageButton(a); InsertImageButtonOpen(dialog_input_args); return; case "Image": dialog_input_args = ParseImage(a); InsertImageOpen(dialog_input_args); return; case "Audio": dialog_input_args = ParseAudio(a); InsertAudioOpen(dialog_input_args); return; case "Picker": dialog_input_args = ParsePicker(a); InsertPickerOpen(dialog_input_args); return; case "Photo": dialog_input_args = ParsePhotoTaker(a); InsertPhotoOpen(dialog_input_args); return; case "AudioRecorder": dialog_input_args = ParseAudioRecorder(a); InsertAudioRecorderOpen(dialog_input_args); return; case "Alert": dialog_input_args = ParseAlert(a); InsertAlertOpen(dialog_input_args); return; case "GPS": dialog_input_args = ParseGPS(a); InsertGPSOpen(dialog_input_args); return; case "HiddenField": dialog_input_args = ParseHiddenField(a); InsertHiddenFieldOpen(dialog_input_args); return } } function InsertHtmlPanelOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3); var b = getNextZIndex(); var c = "320px"; if (isDeviceTypeiPad()) { c = "740px" } dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:40px;left:0px;width:{1};height:420px;font-family:Verdana;font-size:12px;color:#000000;font-style:normal;font-weight:normal;text-decoration:none;background-color:#ffffff;overflow:hidden", b, c) } if (isDeviceTypeiPad()) { $("#html_panel_dialog").dialog("option", "width", 808) } else { $("#html_panel_dialog").dialog("option", "width", 750) } $("#html_panel_dialog").dialog("open"); addIFrame($("#html_panel_dialog"), "EditorTools/InsertHtmlPanel.aspx") } function InsertHtmlPanelCallback(a) { if (a == null) return; deleteSelectedElement(); var b = String.format('<div title="MobiFlex HtmlPanel" id="{0}" style="{2}" >{1}</div>', a[0], a[1], a[2]); DoAddToCanvas(b, a[0]); $("#html_panel_dialog").dialog("close") } function ParseHtmlPanel(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetHtmlPanelInnerHtml(a); b[2] = GetStyleAttribute(a); return b } function InsertLabelOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3); var b = getNextZIndex(); dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:160px;left:10px;width:300px;height:30px;font-family:Verdana;font-size:16px;color:#000000;font-style:normal;font-weight:normal;text-decoration:none;", b) } $("#label_dialog").dialog("open"); addIFrame($("#label_dialog"), "EditorTools/InsertLabel.aspx") } function InsertLabelCallback(a) { if (a == null) return; deleteSelectedElement(); var b = String.format('<div title="MobiFlex Label" id="{0}" style="{2}" >{1}<img src="images/spacer.gif" style="position:relative;top:-16px;width:100%;height:100%" /></div>', a[0], a[1], a[2]); DoAddToCanvas(b, a[0]); $("#label_dialog").dialog("close") } function ParseLabel(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetInnerHtml(a); b[2] = GetStyleAttribute(a); return b } function InsertTextFieldOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(5); var b = getNextZIndex(); dialog_input_args[3] = String.format("position:absolute;z-index:{0};top:160px;left:10px;width:200px;height:30px;font-family:Verdana;font-size:16px;color:#000000;font-style:normal;font-weight:normal;text-decoration:none", b) } $("#text_field_dialog").dialog("open"); addIFrame($("#text_field_dialog"), "EditorTools/InsertTextField.aspx") } function InsertTextFieldCallback(a) { if (a == null) return; deleteSelectedElement(); var b = null; if (a[4] != null) { a[4] = encodeHtml(a[4]); b = String.format('<div title="MobiFlex TextField" id="{0}" type="{1}" alt="{2}"  style="{3}" text="{4}"><img src="images/editor_images/text_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3], a[4]) } else b = String.format('<div title="MobiFlex TextField" id="{0}" type="{1}" alt="{2}"  style="{3}" ><img src="images/editor_images/text_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]); DoAddToCanvas(b, a[0]); $("#text_field_dialog").dialog("close") } function ParseTextField(a) { var b = new Array(5); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "type"); b[2] = GetAttribute(a, "alt"); b[3] = GetStyleAttribute(a); b[4] = decodeHtml(GetAttribute(a, "text")); return b } function InsertTextAreaOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4); var b = getNextZIndex(); dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:44px;left:10px;width:250px;height:300px;font-family:Verdana;font-size:16px;color:#000000;font-style:normal;font-weight:normal;text-decoration:none;background-image:url('images/editor_images/text_area.png');background-repeat:no-repeat;background-size:100% 100%;overflow:hidden;", b) } $("#text_area_dialog").dialog("open"); addIFrame($("#text_area_dialog"), "EditorTools/InsertTextArea.aspx") } function InsertTextAreaCallback(a) { if (a == null) return; deleteSelectedElement(); var b = ""; if (a[1] != null && a[1].length > 0) { a[1] = encodeHtml(a[1]); a[1] = a[1].replaceAll("\r", "").replaceAll("\n", "\\n"); b = a[1].replaceAll("\\n", "<br/>").replaceAll("``", '"').replaceAll("~~", "=") } var c = String.format('<div title="MobiFlex TextArea" id="{0}" text="{1}" style="{2}" type="{3}" ><div style="padding:5px">{4}</div></div>', a[0], a[1], a[2], a[3], b); DoAddToCanvas(c, a[0]); $("#text_area_dialog").dialog("close") } function ParseTextArea(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = decodeHtml(GetTextAttribute(a, "text")); b[2] = GetStyleAttribute(a); b[3] = GetAttribute(a, "type"); return b } function InsertImageOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3); var b = getNextZIndex(); dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:160px;left:10px;height:100px;width:100px", b) } $("#image_dialog").dialog("open"); addIFrame($("#image_dialog"), "EditorTools/InsertImage.aspx") } function InsertImageCallback(a) { if (a == null) return; deleteSelectedElement(); if (a[1] == "images/no_icon.png") var b = String.format('<div title="MobiFlex Image" id="{0}" style="{2}" ><img src="{1}" alt="no image" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2]); else var b = String.format('<div title="MobiFlex Image" id="{0}" style="{2}" ><img src="{1}" alt="image" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2]); DoAddToCanvas(b, a[0]); $("#image_dialog").dialog("close") } function ParseImage(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetImageSource(a); b[2] = GetStyleAttribute(a); return b } function InsertSliderOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4) } $("#slider_dialog").dialog("open"); addIFrame($("#slider_dialog"), "EditorTools/InsertSlider.aspx") } function InsertSliderCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[3] == null || a[3].length == 0) { if (a[1] == "horizontal") { var c = String.format('<div title="MobiFlex Slider" id="{0}" value="{2}" style="position:absolute;z-index:{3};top:160px;left:10px;height:30px;width:277px;" type="{1}" ><img src="images/editor_images/horizontal_slider.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], b) } else { var c = String.format('<div title="MobiFlex Slider" id="{0}" value="{2}" style="position:absolute;z-index:{3};top:160px;left:10px;height:277px;width:30px;" type="{1}" ><img src="images/editor_images/vertical_slider.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], b) } } else { if (a[1] == "horizontal") { var c = String.format('<div title="MobiFlex Slider" id="{0}" value="{2}" style="{3}" type="{1}" ><img src="images/editor_images/horizontal_slider.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]) } else { var c = String.format('<div title="MobiFlex Slider" id="{0}" value="{2}" style="{3}" type="{1}" ><img src="images/editor_images/vertical_slider.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]) } } DoAddToCanvas(c, a[0]); $("#slider_dialog").dialog("close") } function ParseSlider(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "type"); b[2] = GetAttribute(a, "value"); b[3] = GetStyleAttribute(a); return b } function InsertSwitchOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(5) } $("#switch_dialog").dialog("open"); addIFrame($("#switch_dialog"), "EditorTools/InsertSwitch.aspx") } function InsertSwitchCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); var c = null; var d = null; switch (a[2]) { case "on": d = "images/editor_images/switch_on.png"; break; case "off": d = "images/editor_images/switch_off.png"; break; case "yes": d = "images/editor_images/switch_yes.png"; break; case "no": d = "images/editor_images/switch_no.png"; break; case "true": d = "images/editor_images/switch_true.png"; break; case "false": d = "images/editor_images/switch_false.png"; break } if (a[4] == null || a[4].length == 0) { c = String.format('<div title="MobiFlex Switch" id="{0}" style="position:absolute;z-index:{4};top:160px;left:10px;height:27px;width:94px;"  type="{1}" value="{2}" submit="{3}" ><img src="' + d + '" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3], b) } else c = String.format('<div title="MobiFlex Switch" id="{0}" style="{4}" type="{1}" value="{2}" submit="{3}" ><img src="' + d + '" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3], a[4]); DoAddToCanvas(c, a[0]); $("#switch_dialog").dialog("close") } function ParseSwitch(a) { var b = new Array(5); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "type"); b[2] = GetAttribute(a, "value"); b[3] = GetAttribute(a, "submit"); b[4] = GetStyleAttribute(a); return b } function InsertCheckBoxOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4) } $("#checkbox_dialog").dialog("open"); addIFrame($("#checkbox_dialog"), "EditorTools/InsertCheckBox.aspx") } function InsertCheckBoxCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); var c = null; var d = null; switch (a[1]) { case "checked": d = "images/editor_images/checkbox_on.png"; break; case "unchecked": d = "images/editor_images/checkbox_off.png"; break } if (a[3] == null || a[3].length == 0) c = String.format('<div title="MobiFlex CheckBox" id="{0}" style="position:absolute;z-index:{3};top:160px;left:10px;height:30px;width:30px;" value="{1}" submit="{2}" ><img src="' + d + '" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], b); else c = String.format('<div title="MobiFlex CheckBox" id="{0}" style="{3}" value="{1}" submit="{2}" ><img src="' + d + '" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]); DoAddToCanvas(c, a[0]); $("#checkbox_dialog").dialog("close") } function ParseCheckBox(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "value"); b[2] = GetAttribute(a, "submit"); b[3] = GetStyleAttribute(a); return b } function InsertRadioButtonOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(2) } } function InsertRadioButtonCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[1] == null || a[1].length == 0) var c = String.format('<input title="MobiFlex RadioButton" id="{0}" type="radio" value="on" style="position:absolute;z-index:{1};top:160px;left:10px;" />', a[0], b); else var c = String.format('<input title="MobiFlex RadioButton" id="{0}" type="radio" value="on" style="{1}" />', a[0], a[1]); DoAddToCanvas(c, a[0]); $("#radio_button_dialog").dialog("close") } function ParseRadioButton(a) { var b = new Array(2); b[0] = GetAttribute(a, "id"); b[1] = GetStyleAttribute(a); return b } function InsertTableOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(6) } $("#table_dialog").dialog("open"); addIFrame($("#table_dialog"), "EditorTools/InsertTableView.aspx") } function InsertTableCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); var c = a[2].split(":"); if (a[4] != null) { a[4] = encodeHtml(a[4]) } if (a[5] == null || a[5].length == 0) { if (c[0] == "1text|text" || c[0] == "1texthidden|text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="position:absolute;z-index:{5};top:44px;left:0px;height:416px;width:320px;background-image:url(\'images/editor_images/largetableview1textfield.jpg\');background-repeat:no-repeat"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], b) } else if (c[0] == "2texts|text,text" || c[0] == "2textshidden|text,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="position:absolute;z-index:{5};top:44px;left:0px;height:416px;width:320px;background-image:url(\'images/editor_images/largetableview2textfields.jpg\');background-repeat:no-repeat"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], b) } else if (c[0] == "image1text|image,text" || c[0] == "imagetext|image,text" || c[0] == "image1texthidden|image,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="position:absolute;z-index:{5};top:44px;left:0px;height:416px;width:320px;background-image:url(\'images/editor_images/LargeTableView1image1textField.jpg\');background-repeat:no-repeat"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], b) } else if (c[0] == "image2texts|image,text,text" || c[0] == "image2textshidden|image,text,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="position:absolute;z-index:{5};top:44px;left:0px;height:416px;width:320px;background-image:url(\'images/editor_images/LargeTableView1image2textFields.jpg\');background-repeat:no-repeat"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], b) } } else { if (c[0] == "1text|text" || c[0] == "1texthidden|text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="{5}"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], a[5]); d = replaceBackgroundImageSource(d, "images/editor_images/largetableview1textfield.jpg") } else if (c[0] == "2texts|text,text" || c[0] == "2textshidden|text,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="{5}"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], a[5]); d = replaceBackgroundImageSource(d, "images/editor_images/largetableview2textfields.jpg") } else if (c[0] == "image1text|image,text" || c[0] == "imagetext|image,text" || c[0] == "image1texthidden|image,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="{5}"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], a[5]); d = replaceBackgroundImageSource(d, "images/editor_images/LargeTableView1image1textField.jpg") } else if (c[0] == "image2texts|image,text,text" || c[0] == "image2textshidden|image,text,text,hidden") { var d = String.format('<div title="MobiFlex Table" id="{0}" name="{1}" alt="MobiFlex Table"  style="{5}"  fields="{2}" options="{4}" submit="{3}" />', a[0], a[1], a[2], a[3], a[4], a[5]); d = replaceBackgroundImageSource(d, "images/editor_images/LargeTableView1image2textFields.jpg") } } DoAddToCanvas(d, a[0]); $("#table_dialog").dialog("close") } function ParseTable(a) { var b = new Array(6); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "name"); b[2] = GetAttribute(a, "fields"); b[3] = GetAttribute(a, "submit"); b[4] = decodeHtml(GetAttribute(a, "options")); b[5] = GetStyleAttribute(a); return b } function InsertWebViewOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3); var b = getNextZIndex(); if (isDeviceTypeiPad()) dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:44px;left:0px;height:980px;width:768px;", b); else dialog_input_args[2] = String.format("position:absolute;z-index:{0};top:44px;left:0px;height:416px;width:320px;", b) } $("#web_view_dialog").dialog("open"); addIFrame($("#web_view_dialog"), "EditorTools/InsertWebView.aspx") } function InsertWebViewCallback(a) { if (a == null) return; deleteSelectedElement(); var b = null; if (a[1].length > 0) b = String.format('<div title="MobiFlex WebView" alt="MobiFlex WebView" id="{0}" style="{2}" url="{1}" >' + addIFrameString(a[1]) + "</div>", a[0], a[1], a[2]); else { var c = "images/editor_images/WebView.jpg"; if (isDeviceTypeiPad()) c = "images/editor_images/WebView_ipad.jpg"; b = String.format('<div title="MobiFlex WebView" alt="MobiFlex WebView" id="{0}" style="{2}" url="{1}" > <div style="width:100%;height:100%;background-image:url(\'' + c + "');background-repeat:no-repeat\"/></div>", a[0], a[1], a[2]) } DoAddToCanvas(b, a[0]); $("#web_view_dialog").dialog("close") } function ParseWebView(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "url"); b[2] = GetStyleAttribute(a); return b } function InsertMapOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3) } $("#map_dialog").dialog("open"); addIFrame($("#map_dialog"), "EditorTools/InsertMap.aspx") } function InsertMapCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[2] == null || a[2].length == 0) var c = String.format('<div title="MobiFlex Map" alt="MobiFlex Map" id="{0}" style="position:absolute;z-index:{2};top:44px;left:0px;height:416px;width:320px;background-image:url(\'images/editor_images/map.jpg\');background-repeat:no-repeat"  url="{1}" />', a[0], a[1], b); else var c = String.format('<div title="MobiFlex Map" alt="MobiFlex Map" id="{0}" style="{2}"  url="{1}" />', a[0], a[1], a[2], b); DoAddToCanvas(c, a[0]); $("#map_dialog").dialog("close") } function ParseMap(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "url"); b[2] = GetStyleAttribute(a); return b } function InsertSpeechRecognitionOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3) } } function InsertSpeechRecognitionCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[2] == null || a[2].length == 0) var c = String.format('<div title="MobiFlex SpeechRecognition" alt="MobiFlex Speech Recognition" id="{0}" style="position:absolute;z-index:{2};top:44px;left:0px;height:416px;width:320px;" choice_title="{1}"  ><img src="images/editor_images/speech_recognition.png" style="height:100%;width:100%;"/></div>', a[0], a[1], b); else var c = String.format('<div title="MobiFlex SpeechRecognition" alt="MobiFlex Speech Recognition" id="{0}" style="{2}" choice_title="{1}"  ><img src="images/editor_images/speech_recognition.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2]); DoAddToCanvas(c, a[0]); $("#speech_reco_dialog").dialog("close") } function ParseSpeechRecognition(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "choice_title"); b[2] = GetStyleAttribute(a); return b } function InsertButtonOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(5); var b = getNextZIndex(); dialog_input_args[3] = String.format("position:absolute;z-index:{0};font-family:Verdana;font-size:16px;color:#ffffff;font-style:normal;font-weight:normal;text-decoration:none;width:144px;height:30px;top:160px;left:10px;", b) } $("#button_dialog").dialog("open"); addIFrame($("#button_dialog"), "EditorTools/InsertButton.aspx") } function InsertButtonCallback(a) { if (a == null) return; deleteSelectedElement(); var b = a[3].indexOf("font-size") + 10; var c = a[3].indexOf("px", b); var d = a[3].substring(b, c); b = a[3].indexOf("height") + 7; var c = a[3].indexOf("px", b); var e = a[3].substring(b, c); var f = -e / 2 - 5 * d / 3; var g = String.format('<div title="MobiFlex Button" style="{3}" id="{0}" align="center"  submit="{1}"><img src="{4}" style="width:100%;height:100%" /><p style="position:relative;top:{5}px;">{2}</p></div>', a[0], a[1], a[2], a[3], a[4], f); DoAddToCanvas(g, a[0]); $("#button_dialog").dialog("close") } function ParseButton(a) { var b = new Array(5); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "submit"); b[2] = GetPInnerHtml(a); b[3] = GetStyleAttribute(a); b[4] = GetImgSrc(a); return b } function InsertImageButtonOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4); var b = getNextZIndex(); dialog_input_args[3] = String.format("position:absolute;z-index:{0};top:160px;left:10px;height:100px;width:100px", b) } $("#image_button_dialog").dialog("open"); addIFrame($("#image_button_dialog"), "EditorTools/InsertImageButton.aspx") } function InsertImageButtonCallback(a) { if (a == null) return; deleteSelectedElement(); var b = String.format('<div title="MobiFlex ImageButton"  style="{3}" id="{0}"  submit="{2}"><img src="{1}" alt="button" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]); DoAddToCanvas(b, a[0]); $("#image_button_dialog").dialog("close") } function ParseImageButton(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetImageSource(a); b[2] = GetAttribute(a, "submit"); b[3] = GetStyleAttribute(a); return b } function InsertSelectOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4) } } function InsertSelectCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[3] == null || a[3].length == 0) var c = String.format('<div title="MobiFlex Select" style="position:absolute;z-index:{3};top:160px;left:10px;width: 100px; height: 22px;font-family: tahoma; font-size: 12px;" id="{0}" type="{1}" >{2}</div>', a[0], a[1], a[2], b); else var c = String.format('<div title="MobiFlex Select" style="{3}" id="{0}" type="{1}" >{2}</div>', a[0], a[1], a[2], a[3]); DoAddToCanvas(c, a[0]); $("#select_dialog").dialog("close") } function ParseSelect(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "type"); b[2] = GetOptions(a); b[3] = GetStyleAttribute(a); return b } function InsertPickerOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4) } $("#picker_dialog").dialog("open"); var b = getAppType(); if (b == "web" || b == "hybrid") addIFrame($("#picker_dialog"), "EditorTools/InsertWebAppPicker.aspx"); else addIFrame($("#picker_dialog"), "EditorTools/InsertPicker.aspx") } function InsertPickerCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); var c = a[1].split(":"); if (a[2] != null) { a[2] = encodeHtml(a[2]) } var d = null; var e = getAppType(); if (a[3] == null || a[3].length == 0) { if (c[0].indexOf("date") >= 0) { if (e == "web" || e == "hybrid") d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:5px;width:310px; height:40px;background-image:url(\'images/editor_images/spinner.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options=""  />', a[0], a[1], b); else d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/datepicker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options=""  />', a[0], a[1], b) } else if (c[0].indexOf("time") >= 0) { if (e == "web" || e == "hybrid") d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:5px;width:310px; height:40px;background-image:url(\'images/editor_images/spinner.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="" />', a[0], a[1], b); else d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/time_picker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="" />', a[0], a[1], b) } else if (c[0].indexOf("1_section") >= 0) { if (e == "web" || e == "hybrid") d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:5px;width:310px; height:40px;background-image:url(\'images/editor_images/spinner.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], b); else d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/1section_picker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], b) } else if (c[0].indexOf("2_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/2section_picker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], b); else if (c[0].indexOf("3_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/3section_picker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], b); else if (c[0].indexOf("4_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="position:absolute;z-index:{3};top:44px;left:0px;width:320px; height:216px;background-image:url(\'images/editor_images/4section_picker.jpg\');background-repeat:no-repeat" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], b) } else { if (c[0].indexOf("date") >= 0) d = String.format('<div title="MobiFlex Picker" style="{2}" id="{0}"  type="{1}" options=""  />', a[0], a[1], a[3]); else if (c[0].indexOf("time") >= 0) d = String.format('<div title="MobiFlex Picker" style="{2}" id="{0}"  type="{1}" options=""  />', a[0], a[1], a[3]); else if (c[0].indexOf("1_section") >= 0) d = String.format('<div title="MobiFlex Picker" style="{3}" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], a[3]); else if (c[0].indexOf("2_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="{3}" id="{0}"  type="{1}" options="{2}"  />', a[0], a[1], a[2], a[3]); else if (c[0].indexOf("3_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="{3}" id="{0}"  type="{1}" options="{2}"  />', a[0], a[1], a[2], a[3]); else if (c[0].indexOf("4_sections") >= 0) d = String.format('<div title="MobiFlex Picker" style="{3}" id="{0}"  type="{1}" options="{2}" />', a[0], a[1], a[2], a[3]) } DoAddToCanvas(d, a[0]); $("#picker_dialog").dialog("close") } function ParsePicker(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "type"); b[2] = decodeHtml(GetAttribute(a, "options")); b[3] = GetStyleAttribute(a); return b } function InsertPhotoOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(4) } $("#photo_dialog").dialog("open"); addIFrame($("#photo_dialog"), "EditorTools/InsertPhotoTaker.aspx") } function InsertPhotoCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[3] == null || a[3].length == 0) var c = String.format('<div title="MobiFlex Photo" id="{0}" compression="{1}"  icon_field="{2}" style="position:absolute;z-index:{2};top:160px;left:10px;height:48px;width:48px;"  ><img src="images/editor_images/picture_taker.gif" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], b); else var c = String.format('<div title="MobiFlex Photo" id="{0}" compression="{1}" icon_field="{2}" style="{3}"  ><img src="images/editor_images/picture_taker.gif" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2], a[3]); DoAddToCanvas(c, a[0]); $("#photo_dialog").dialog("close") } function ParsePhotoTaker(a) { var b = new Array(4); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "compression"); b[2] = GetAttribute(a, "icon_field"); b[3] = GetStyleAttribute(a); return b } function InsertAlertOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(2) } $("#alert_dialog").dialog("open"); addIFrame($("#alert_dialog"), "EditorTools/InsertAlert.aspx") } function InsertAlertCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[1] == null || a[1].length == 0) var c = String.format('<div title="MobiFlex Alert" id="{0}" style="position:absolute;z-index:{1};top:410px;left:270px;height:50px;width:50px;"  ><img src="images/editor_images/alert.png" style="height:100%;width:100%;"/></div>', a[0], b); else var c = String.format('<div title="MobiFlex Alert" id="{0}" style="{1}"  ><img src="images/editor_images/alert.png" style="height:100%;width:100%;"/></div>', a[0], a[1]); DoAddToCanvas(c, a[0]); $("#alert_dialog").dialog("close") } function ParseAlert(a) { var b = new Array(2); b[0] = GetAttribute(a, "id"); b[1] = GetStyleAttribute(a); return b } function InsertGPSOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(2) } $("#gps_dialog").dialog("open"); addIFrame($("#gps_dialog"), "EditorTools/InsertGPS.aspx") } function InsertGPSCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[1] == null || a[1].length == 0) var c = String.format('<div title="MobiFlex GPS" id="GPS" alt="{0}" style="position:absolute;z-index:{1};top:160px;left:10px;height:30px;width:30px;"><img src="images/editor_images/gps.png" style="height:100%;width:100%;"/></div>', a[0], b); else var c = String.format('<div title="MobiFlex GPS" id="GPS" alt="{0}" style="{1}"  ><img src="images/editor_images/gps.png" style="height:100%;width:100%;"/></div>', a[0], a[1]); DoAddToCanvas(c, "GPS"); $("#gps_dialog").dialog("close") } function ParseGPS(a) { var b = new Array(2); b[0] = GetAttribute(a, "alt"); b[1] = GetStyleAttribute(a); return b } function InsertHiddenFieldOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3) } $("#hidden_field_dialog").dialog("open"); addIFrame($("#hidden_field_dialog"), "EditorTools/InsertHiddenField.aspx") } function InsertHiddenFieldCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[1] != null) { a[1] = encodeHtml(a[1]) } if (a[2] == null || a[2].length == 0) var c = String.format('<div title="MobiFlex HiddenField" id="{0}" value="{1}" style="position:absolute;z-index:{2};top:410px;left:0px;height:30px;width:30px;"  ><img src="images/editor_images/hidden_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], b); else var c = String.format('<div title="MobiFlex HiddenField" id="{0}" value="{1}" style="{2}"  ><img src="images/editor_images/hidden_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2]); DoAddToCanvas(c, a[0]); $("#hidden_field_dialog").dialog("close") } function ParseHiddenField(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = decodeHtml(GetAttribute(a, "value")); b[2] = GetStyleAttribute(a); return b } function InsertAudioOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(3) } $("#audio_dialog").dialog("open"); addIFrame($("#audio_dialog"), "EditorTools/InsertAudio.aspx") } function InsertAudioCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[2] == null || a[2].length == 0) var c = String.format('<div title="MobiFlex Audio" id="{0}" source="{1}" style="position:absolute;z-index:{2};top:410px;left:145px;height:30px;width:30px;"  ><img src="images/editor_images/audio_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], b); else var c = String.format('<div title="MobiFlex Audio" id="{0}" source="{1}" style="{2}"  ><img src="images/editor_images/audio_field.png" style="height:100%;width:100%;"/></div>', a[0], a[1], a[2]); DoAddToCanvas(c, a[0]); $("#audio_dialog").dialog("close") } function ParseAudio(a) { var b = new Array(3); b[0] = GetAttribute(a, "id"); b[1] = GetAttribute(a, "source"); b[2] = GetStyleAttribute(a); return b } function InsertAudioRecorderOpen(a) { if (a) dialog_input_args = a; else { dialog_input_args = new Array(2) } $("#audio_recorder_dialog").dialog("open"); addIFrame($("#audio_recorder_dialog"), "EditorTools/InsertAudioRecorder.aspx") } function InsertAudioRecorderCallback(a) { if (a == null) return; deleteSelectedElement(); var b = getNextZIndex(); if (a[1] == null || a[1].length == 0) var c = String.format('<div title="MobiFlex AudioRecorder" id="{0}" style="position:absolute;z-index:{1};top:160px;left:10px;height:84px;width:198px;"  ><img src="images/editor_images/audio_recorder.png" style="height:100%;width:100%;"/></div>', a[0], b); else var c = String.format('<div title="MobiFlex AudioRecorder" id="{0}" style="{1}"  ><img src="images/editor_images/audio_recorder.png" style="height:100%;width:100%;"/></div>', a[0], a[1]); DoAddToCanvas(c, a[0]); $("#audio_recorder_dialog").dialog("close") } function ParseAudioRecorder(a) { var b = new Array(2); b[0] = GetAttribute(a, "id"); b[1] = GetStyleAttribute(a); return b } function IsValidObjectName(a) { var b = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_ "; var c; for (i = 0; i < a.length; i++) { c = a.charAt(i); if (b.indexOf(c) == -1) { return false } } return true } function SaveAppPage() { var a = document.getElementById("PageName"); var b = a.value; if (b.length > 0 && !IsValidObjectName(b)) { alert('Page Name can only contain either a letter, number, space or "_" and be 1 to 100 characters long'); return } else { var c = document.getElementById("SaveAppPost"); getCanvasHtml(); c.click(); document.getElementById("storyBoard").src = document.getElementById("storyBoard").src } } function checkStoryBoardRefresh() { var a = document.getElementById("SavedCanvasHtml"); if (a.value.length > 0) document.getElementById("storyBoard").src = document.getElementById("storyBoard").src } function xmlEncode(a) { return a.replace(/\&/g, "&" + "amp;").replace(/</g, "&" + "lt;").replace(/>/g, "&" + "gt;").replace(/\'/g, "&" + "apos;").replace(/\"/g, "&" + "quot;") } function DoAddToCanvas(a, b) { var c = document.getElementById("canvas"); c.contentWindow.insertHtml(a, b) } function getCanvasHtml() { var a = document.getElementById("canvas"); var b = a.contentDocument.getElementById("form1"); var c = document.getElementById("SavedCanvasHtml"); c.value = xmlEncode(b.innerHTML) } function onWebAppsDesignAjaxResponseEnd(a, b) { if (shouldHideTools) shouldHideTools = false; else { var c = document.getElementById("AppName"); var d = document.getElementById("edit_tools"); if (c && c.value != "") d.style.display = "inline"; else d.style.display = "none" } } function onWebAppsDesignAjaxRequestStart(a, b) { if (b.EventTarget == "DisplayMode") { var c = document.getElementById("DisplayModeButton"); var d = c.control.get_selectedToggleStateIndex(); var e = document.getElementById("edit_tools"); if (d == 1) { getCanvasHtml(); e.style.display = "none"; shouldHideTools = true } else { e.style.display = "inline" } } } function onChangeAppProperties(a, b) { var c = a.get_value(); switch (c) { case "web_data_sources": setWebDataSources(); break; case "app_description": setAppDescription(); break; case "page_transition_type": setPageTransitionType(); break; case "app_device": setAppDevice(); break; case "app_background_color": setAppBackgroundColor(); break; case "app_background_image": showSetBackgroundClient(); break; case "url_account_identifier": setUrlAccountIdentifier(); break; case "app_images": appImages(); break; case "on_app_open": onAppOpenSetting(); break; case "custom_header_html": setCustomHeaderHtml(); break; default: return } a.trackChanges(); var d = a.findItemByText("Select ->"); d.select(); a.commitChanges() } function setWebDataSources() { $("#web_data_sources_dialog").dialog("open"); addIFrame($("#web_data_sources_dialog"), "PageData/WebDataSources.aspx") } function setWebDataSourcesCallback(a) { var b = document.getElementById("WebDataSource"); b.value = a; if (a.length > 0) { var c = document.getElementById("SaveWebDataSource"); c.click() } } function editGoogleSpreadsheetDataSource(a) { $("#google_spreadsheet_data_source_dialog").dialog("open"); addIFrame($("#google_spreadsheet_data_source_dialog"), "PageData/GoogleSpreadsheetDataSource.aspx?id=" + a.replaceAll(" ", "%20")) } function addGoogleSpreadsheetDataSource() { $("#google_spreadsheet_data_source_dialog").dialog("open"); addIFrame($("#google_spreadsheet_data_source_dialog"), "PageData/GoogleSpreadsheetDataSource.aspx"); $("#google_spreadsheet_data_source_dialog").dialog({ close: function (a, b) { $("#manage_page_data_dialog:first").find("#hidden_field_iframe:first").contents().find("#AppDataSourcesPost:first").click() } }) } function editRSSDataSource(a) { $("#rss_data_surce_dialog").dialog("open"); addIFrame($("#rss_data_surce_dialog"), "PageData/RSSDataSource.aspx?id=" + a.replaceAll(" ", "%20")) } function addRSSDataSource() { $("#rss_data_surce_dialog").dialog("open"); addIFrame($("#rss_data_surce_dialog"), "PageData/RSSDataSource.aspx") } function editRESTWebServiceDataSource(a) { $("#rest_web_service_data_source_dialog").dialog("open"); addIFrame($("#rest_web_service_data_source_dialog"), "PageData/RESTWebServiceDataSource.aspx?id=" + a.replaceAll(" ", "%20")) } function addRESTWebServiceDataSource() { $("#rest_web_service_data_source_dialog").dialog("open"); addIFrame($("#rest_web_service_data_source_dialog"), "PageData/RESTWebServiceDataSource.aspx") } function editSOAPWebServiceDataSource(a) { $("#soap_web_service_data_source_dialog").dialog("open"); addIFrame($("#soap_web_service_data_source_dialog"), "PageData/SOAPWebServiceDataSource.aspx?id=" + a.replaceAll(" ", "%20")) } function addSOAPWebServiceDataSource() { $("#soap_web_service_data_source_dialog").dialog("open"); addIFrame($("#soap_web_service_data_source_dialog"), "PageData/SOAPWebServiceDataSource.aspx") } function editSQLDatabaseDataSource(a) { $("#sql_database_data_source_dialog").dialog("open"); addIFrame($("#sql_database_data_source_dialog"), "PageData/SQLDatabaseDataSource.aspx?id=" + a.replaceAll(" ", "%20")) } function addSQLDatabaseDataSource() { $("#sql_database_data_source_dialog").dialog("open"); addIFrame($("#sql_database_data_source_dialog"), "PageData/SQLDatabaseDataSource.aspx") } function managePageData() { var a = document.getElementById("PageName"); if (a && a.value != "") { $("#manage_page_data_dialog").dialog("option", "title", "Manage Page Data for Page: " + a.value) } $("#manage_page_data_dialog").dialog("open"); addIFrame($("#manage_page_data_dialog"), "PageData/ManagePageData.aspx") } function appImages() { $("#app_images_dialog").dialog("open"); addIFrame($("#app_images_dialog"), "Dialogs/Design/AppImages.aspx") } function onAppOpenSetting() { $("#on_app_open_dialog").dialog("open"); addIFrame($("#on_app_open_dialog"), "Dialogs/Design/OnAppOpen.aspx") } function setCustomHeaderHtml() { $("#custom_header_html_dialog").dialog("open"); addIFrame($("#custom_header_html_dialog"), "Dialogs/Design/SetCustomHeaderHtml.aspx") } function checkURLIdentifier(a, b) { var c = document.getElementById("UrlAccountIdentifier"); if (c.value.length > 0) { var d = document.getElementById("DisplayMode"); d.click() } else setUrlAccountIdentifier() } function setUrlAccountIdentifier() { $("#account_identifier_dialog").dialog("open"); addIFrame($("#account_identifier_dialog"), "Dialogs/Publish/AccountIdentifier.aspx") } function setUrlAccountIdentifierCallback(a) { var b = document.getElementById("UrlAccountIdentifier"); b.value = a; if (a.length > 0) { var c = document.getElementById("DisplayMode"); c.click() } } function setAppDescription() { $("#app_description_dialog").dialog("open"); addIFrame($("#app_description_dialog"), "Dialogs/Design/AppDescription.aspx") } function setPageTransitionType() { $("#page_transition_type_dialog").dialog("open"); addIFrame($("#page_transition_type_dialog"), "Dialogs/Design/PageTransitionType.aspx") } function setAppDevice() { $("#app_device_dialog").dialog("open"); addIFrame($("#app_device_dialog"), "Dialogs/Design/AppDevice.aspx"); $("#app_device_dialog").bind("dialogclose", function (a, b) { var c = document.getElementById("SetViewForDeviceTypePost"); c.click() }) } function setAppBackgroundColor() { $("#app_background_color_dialog").dialog("open"); addIFrame($("#app_background_color_dialog"), "Dialogs/Design/AppBackgroundColor.aspx"); $("#app_background_color_dialog").bind("dialogclose", function (a, b) { var c = document.getElementById("DisplayMode"); c.click() }) } function GetTdAttribute(a, b) { var c = a.indexOf("<td"); return GetAttribute(a.substring(c), b) } function GetTableAttribute(a, b) { var c = a.indexOf("<table"); return GetAttribute(a.substring(c), b) } function GetImgSrc(a) { var b = a.indexOf(' src="') + 6; var c = a.indexOf('"', b); if (c < 0) return ""; return a.substring(b, c) } function GetTextAttribute(a, b) { var c = a.indexOf(b + '="'); c += b.length + 2; var d = a.indexOf('"', c); if (d < 0) return ""; return a.substring(c, d) } function GetStyleAttribute(a) { var b = a.indexOf(">"); if (b < 0) return ""; var c = a.substring(0, b); var d = c.indexOf('style="'); if (d >= 0) { d += 7; var e = c.indexOf('"', d); if (e >= 0) { var f = c.substring(d, e); return f } return "" } else { var d = c.indexOf("style='"); if (d >= 0) { d += 7; var e = c.indexOf("'", d); if (e >= 0) { var f = c.substring(d, e); return f.replaceAll('"', "'") } return "" } else return "" } return "" } function GetAttribute(a, b) { var c = a.replaceAll("  ", " ").replace(" =", "=").replace("= ", "="); var d = c.indexOf(" "); d += 1; var e = c.indexOf(">", d); if (e < 0) return ""; var f = c.substring(d, e); var g = f.split(" "); var h = new Array(g.length); var i = 0; var j = false; var k = ""; for (var l = 0; l < g.length; l++) { if (!j) { var m = g[l].indexOf('"'); if (m >= 0) { var n = g[l].lastIndexOf('"'); if (m == n) { j = true; k += g[l] + " " } else { h[i++] = g[l] } } else { h[i++] = g[l] } } else { if (g[l].indexOf('"') >= 0) { j = false; k += g[l]; h[i++] = k.trim(); k = "" } else { k += g[l] + " " } } } for (i = 0; i < h.length; i++) { if (h[i] == null || h[i].length == 0) continue; var o = h[i].split("="); if (o[0] == b) { var p = o[1].split('"'); if (p.length == 3) return p[1]; else return o[1] } } } function replaceBackgroundImageSource(a, b) { var c = a.indexOf("images/"); var d = a.indexOf(".jpg", c); if (d < 0) return ""; d += 4; var e = a.substring(0, c) + b + a.substring(d); return e } function getMaxZIndex() { var a = returnCanvasHtml(); var b = 0; var c = 0; while (true) { c = a.toLowerCase().indexOf("z-index:", c); if (c < 0) break; c += 8; var d = a.indexOf(";", c); if (d < 0) break; var e = parseInt(a.substring(c, d)); if (e > b) b = e; c = d + 1 } return b } function getMinZIndex() { var a = returnCanvasHtml(); var b = 1e6; var c = 0; while (true) { c = a.toLowerCase().indexOf("z-index:", c); if (c < 0) break; c += 8; var d = a.indexOf(";", c); if (d < 0) break; var e = parseInt(a.substring(c, d)); if (e < b) b = e; c = d + 1 } return b } function setZIndex(a, b) { var c = a.toLowerCase().indexOf("z-index:"); if (c < 0) { c = a.toLowerCase().indexOf('style="'); if (c < 0) return ""; else { c += 7; b = "z-index:" + b + ";"; d = c } } else { c += 8; var d = a.indexOf(";", c); if (d < 0) return "" } var e = a.substring(0, c) + b + a.substring(d); return e } function GetOptions(a) { var b = 0; var c = "<option"; var d = "</option>"; var e = ""; while (true) { var f = a.toLowerCase().indexOf(c, b); if (f < 0) break; b = f + c.length; f = a.indexOf(">", b); if (f < 0) break; b = f + 1; f = a.toLowerCase().indexOf(d, b); if (f < 0) break; e += a.substring(b, f) + "\n"; b = f + d.length } return e.substring(0, e.length - 1) } function GetInnerHtml(a) { var b = a.indexOf(">", 0) + 1; var c = a.indexOf("<", b); return a.substring(b, c) } function GetPInnerHtml(a) { var b = a.toLowerCase().indexOf("<p", 0) + 2; b = a.indexOf(">", b) + 1; var c = a.indexOf("<", b); return a.substring(b, c) } function GetTdInnerHtml(a) { var b = "</td"; var c = a.toLowerCase().indexOf(b); var d = a.lastIndexOf(">", c) + 1; var e = a.substring(d, c); return e } function GetHtmlPanelInnerHtml(a) { var b = a.indexOf(">", 0) + 1; var c = a.length - 6; var d = a.substring(b, c); c = d.lastIndexOf("<div"); c = d.lastIndexOf("<div", c - 1); c = d.lastIndexOf("<div", c - 1); return d.substring(0, c) } function GetImageSource(a) { var b = a.toLowerCase().indexOf("src", 0) + 5; var c = a.indexOf('"', b); var d = a.substring(b, c); return d } function getHtmlSelection(a) { var b = getSelectedElement(); if (!b || b.nodeName.toLowerCase() == "body") return ""; if (b.nodeName.toLowerCase() == "p") b = b.parentNode; return OuterHTML(b) } function OuterHTML(a) { var b = document.createElement("div"); b.appendChild(a.cloneNode(true)); return b.innerHTML } function encodeHtml(a) { return a.replace(/</g, "&" + "lt;").replace(/>/g, "&" + "gt;").replace(/\"/g, "``").replace(/\=/g, "~~") } function decodeHtml(a) { if (a) { return a.replaceAll("&" + "lt;", "<").replaceAll("&" + "gt;", ">").replaceAll("``", '"').replaceAll("~~", "=").replaceAll("&" + "amp;", "&") } else return null } function getSelectedHtml() { var a = document.getElementById("canvas"); var b = a.contentDocument.getElementById("prev_selected_html"); if (b == null) return null; return b.value } function getSelectedElement() { var a = document.getElementById("canvas"); return a.contentWindow.getSelectedElement() } function copySelectedElement() { var a = document.getElementById("canvas"); a.contentWindow.copySelectedElement() } function pasteSelectedElement() { var a = document.getElementById("canvas"); a.contentWindow.pasteSelectedElement() } function deleteSelectedElement() { var a = document.getElementById("canvas"); a.contentWindow.deleteSelectedElement() } function getNextZIndex() { var a = document.getElementById("canvas"); var b = a.contentDocument.getElementById("form1"); return b.innerHTML.length } function returnCanvasHtml() { var a = document.getElementById("canvas"); var b = a.contentDocument.getElementById("form1"); return b.innerHTML } function checkChangingDeviceView() { if (isFirstTimeAlertForChangingDeviceView) { isFirstTimeAlertForChangingDeviceView = false; return confirm("Changing the device view will only show fields and background that have been saved. Do you want to continue?") } else return true } function checkChangingDeviceDesign() { return confirm("Changing the device design will rescale all the pages of this app that have been saved. Do you want to continue?") } function addIFrame(a, b) { var c = document.createElement("iframe"); c.setAttribute("id", "hidden_field_iframe"); c.setAttribute("src", b); c.setAttribute("width", "100%"); c.setAttribute("height", "100%"); c.setAttribute("marginheight", "0"); c.setAttribute("marginwidth", "0"); c.setAttribute("scrolling", "no"); c.setAttribute("style", "border-width:0;"); a.append(c) } function deleteIFrame(a) { var b = document.createElement("iframe") } function addIFrameString(a) { return "<iframe src='" + a + "' width='99%' height='99.4%' marginheight='0' marginwidth='0' scrolling='no' style='border-width:0;' />" } function isDeviceTypeiPad() { var a = document.getElementById("DeviceType"); return a.value == "ipad" ? true : false } function onSetBackgroundClientClose(a, b) { var c = b.get_argument(); if (c) { if (c == "upload") { var d = radopen("Dialogs/Design/UploadBackgroundImage.aspx", "SetOwnBackgroundBox"); d.set_visibleTitlebar(false); d.set_visibleStatusbar(false); d.set_modal(true); d.setSize(500, 150); d.moveTo(200, 150); d.add_close(onSetBackgroundClientClose); return false } else { var e = document.getElementById("Background"); if (e.value == "" && c != "") { e.value = c; var f = document.getElementById("SetBackgroundPost"); getCanvasHtml(); f.click() } } } } function showSetBackgroundClient() { var a = radopen("Dialogs/CoverFlow/BackgroundIndex.html", "SetBackgroundBox"); a.set_visibleTitlebar(true); a.set_visibleStatusbar(false); a.set_modal(true); a.setSize(1024, 580); a.moveTo(50, 50); a.add_close(onSetBackgroundClientClose); return false } function getAppType() { var a = document.getElementById("AppType"); if (a == null) return "native"; else return a.value } var storyBoardWindow = null; var dialog_input_args; $(function () { $("#dialog:ui-dialog").dialog("destroy"); $("#new_app_dialog").dialog({ autoOpen: false, width: 620, height: 350, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#rename_app_dialog").dialog({ autoOpen: false, width: 350, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#duplicate_app_dialog").dialog({ autoOpen: false, width: 350, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#convert_app_dialog").dialog({ autoOpen: false, width: 500, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#new_page_dialog").dialog({ autoOpen: false, width: 350, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#rename_page_dialog").dialog({ autoOpen: false, width: 350, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#duplicate_page_dialog").dialog({ autoOpen: false, width: 350, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#tool_help_dialog").dialog({ autoOpen: false, width: 800, height: 550, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#design_page_help_dialog").dialog({ autoOpen: false, width: 420, height: 280, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#custom_header_html_dialog").dialog({ autoOpen: false, width: 700, height: 800, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#on_app_open_dialog").dialog({ autoOpen: false, width: 800, height: 600, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#app_images_dialog").dialog({ autoOpen: false, width: 1200, height: 1e3, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#app_description_dialog").dialog({ autoOpen: false, width: 500, height: 280, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#page_transition_type_dialog").dialog({ autoOpen: false, width: 500, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#app_device_dialog").dialog({ autoOpen: false, width: 500, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#web_data_sources_dialog").dialog({ autoOpen: false, width: 800, height: 500, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#google_spreadsheet_data_source_dialog").dialog({ autoOpen: false, width: 900, height: 260, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#rss_data_surce_dialog").dialog({ autoOpen: false, width: 800, height: 500, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#rest_web_service_data_source_dialog").dialog({ autoOpen: false, width: 800, height: 500, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#soap_web_service_data_source_dialog").dialog({ autoOpen: false, width: 800, height: 500, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#sql_database_data_source_dialog").dialog({ autoOpen: false, width: 800, height: 500, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#manage_page_data_dialog").dialog({ autoOpen: false, width: 1100, height: 1e3, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#account_identifier_dialog").dialog({ autoOpen: false, width: 400, height: 250, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#app_background_color_dialog").dialog({ autoOpen: false, width: 585, height: 375, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#label_dialog").dialog({ autoOpen: false, width: 500, height: 310, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#label").button().click(function () { InsertLabelOpen(null) }); $("#html_panel_dialog").dialog({ autoOpen: false, width: 750, height: 990, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#html_panel").button().click(function () { InsertHtmlPanelOpen(null) }); $("#text_field_dialog").dialog({ autoOpen: false, width: 500, height: 420, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#text_field").button().click(function () { InsertTextFieldOpen(null) }); $("#text_area_dialog").dialog({ autoOpen: false, width: 500, height: 540, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#text_area").button().click(function () { InsertTextAreaOpen(null) }); $("#image_dialog").dialog({ autoOpen: false, width: 770, height: 600, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#image").button().click(function () { InsertImageOpen(null) }); $("#button_dialog").dialog({ autoOpen: false, width: 800, height: 505, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#button").button().click(function () { InsertButtonOpen(null) }); $("#image_button_dialog").dialog({ autoOpen: false, width: 800, height: 520, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#image_button").button().click(function () { InsertImageButtonOpen(null) }); $("#switch_dialog").dialog({ autoOpen: false, width: 800, height: 405, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#switch").button().click(function () { InsertSwitchOpen(null) }); $("#checkbox_dialog").dialog({ autoOpen: false, width: 800, height: 405, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#checkbox").button().click(function () { InsertCheckBoxOpen(null) }); $("#table_dialog").dialog({ autoOpen: false, width: 800, height: 530, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#table").button().click(function () { InsertTableOpen(null) }); $("#picker_dialog").dialog({ autoOpen: false, width: 750, height: 520, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#picker").button().click(function () { InsertPickerOpen(null) }); $("#web_view_dialog").dialog({ autoOpen: false, width: 600, height: 260, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#web_view").button().click(function () { InsertWebViewOpen(null) }); $("#gps_dialog").dialog({ autoOpen: false, width: 440, height: 260, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#gps").button().click(function () { InsertGPSOpen(null) }); $("#slider_dialog").dialog({ autoOpen: false, width: 400, height: 300, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#slider").button().click(function () { InsertSliderOpen(null) }); $("#photo_dialog").dialog({ autoOpen: false, width: 500, height: 265, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#photo").button().click(function () { InsertPhotoOpen(null) }); $("#audio_recorder_dialog").dialog({ autoOpen: false, width: 500, height: 150, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#audio_recorder").button().click(function () { InsertAudioRecorderOpen(null) }); $("#audio_dialog").dialog({ autoOpen: false, width: 680, height: 345, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#audio").button().click(function () { InsertAudioOpen(null) }); $("#alert_dialog").dialog({ autoOpen: false, width: 590, height: 225, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#alert").button().click(function () { InsertAlertOpen(null) }); $("#map_dialog").dialog({ autoOpen: false, width: 600, height: 280, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#map").button().click(function () { InsertMapOpen(null) }); $("#hidden_field_dialog").dialog({ autoOpen: false, width: 600, height: 250, modal: true, beforeClose: function (a, b) { $(this).children().first().remove() } }); $("#hidden_field").button().click(function () { InsertHiddenFieldOpen(null) }) }); var editorSelectedHtml; var tool_left_position = 570; var tool_top_position = 200; var shouldHideTools = false; var isFirstTimeAlertForChangingDeviceView = true; String.prototype.replaceAll = function (a, b) { var c = this; var d = c.indexOf(a); while (d != -1) { c = c.replace(a, b); d = c.indexOf(a) } return c }